#!/bin/sh
# mistermaker: Automates building lots of VCS PKGBUILDS
# Written by Renan Guilherme <japareaggae@gmail.com>

# Where do you store your packages?
DEVDIR="$HOME/Development/vcs-pkgbuilds"

# Finds directories and builds packages inside them
_build(){
for package in $DEVDIR/*/; do
	cd "$package"
	makepkg -sic
	cd ..
done
}

# Removes week-old packages or all packages
_clean(){
find $DEVDIR -iname "*.pkg.tar*" -mtime +7 -printf "%f\n" -delete
}

_purge(){
find $DEVDIR -iname "*.pkg.tar*" -printf "%f\n" -delete
}

case $1 in
	clean) _clean;;
	purge) _purge;;
	*)     _build;;
esac
