#!/bin/sh
# pkgchanges -- see the git repository for an Arch package
# Written by Renan Guilherme <japareaggae@gmail.com>
# Released under the public domain <http://unlicense.org/UNLICENSE>

_usage(){
	echo "Usage: $(basename $0) package"
}

if [ $# -ne 1 ]; then
	_usage
	exit 1
fi

DB="$(pacman -Sii $1 | grep 'Repository' | awk '{print $3}')"

case $DB in
	*core | *extra)         REPO='packages' ;;
	*community | *multilib) REPO='community' ;;
	*)                      echo "error: $DB is not a valid repository"; exit 1 ;;
esac

xdg-open "https://projects.archlinux.org/svntogit/$REPO.git/log/trunk?h=packages/$1"

