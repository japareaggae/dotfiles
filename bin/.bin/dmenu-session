#!/bin/bash
# dmenu-session -- A session menu using systemd and dmenu
# Written by Renan Guilherme <japareaggae@gmail.com>
# Released under the public domain <http://unlicense.org/UNLICENSE>

option=$( printf "cancel\nlock\nlogout\nshutdown\nreboot\nsuspend\nhibernate\nhybrid-sleep\n" | dmenu -p Session )

_getOut(){
	(pgrep 'i3' > /dev/null) && i3 exit
	(pgrep 'bspwm' > /dev/null) && bspc quit
	(pgrep 'openbox' > /dev/null) && openbox --exit
	(pgrep 'sway' > /dev/null) && i3-msg exit
}

case $option in
	lock) $HOME/.bin/i3locker ;;
	logout) _getOut;;
	shutdown) systemctl poweroff;;
	reboot) systemctl reboot;;
	suspend) systemctl suspend;;
	hibernate) systemctl hibernate;;
	hybrid-sleep) systemctl hybrid-sleep;;
	*) ;;
esac
