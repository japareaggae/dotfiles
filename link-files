#!/bin/bash
# link-files: links dotfiles from a repo into a folder
# Originally written by Michael Smalley
# Severely modified by Renan Guilherme

# --- Location
DOTLOC="$HOME/.dotfiles"

# --- Defitions
TERMDOTS=('zshenv'
          'zshrc'
          'vimrc'
          'tmux.conf'
          'makepkg.conf'
          'bin'
          'vim'
          'ncmpcpp'
          'config/git'
          'config/cower'
          'config/ranger'
          'config/htop')

XDOTS=('conkyrc'
       'pentadactyl'
       'pentadactylrc'
       'Xresources'
       'xprofile'
       'xinitrc'
       'config/compton.conf'
       'config/weston.ini'
       'config/i3'
       'config/termite'
       'config/xcolors'
       'config/dunst'
       'config/feh'
       'config/sxiv')

OBDOTS=('neaprc'
        'config/skippy-xd'
        'config/tint2'
        'config/openbox')

# --- Functions
_usage(){
	echo "Usage: $(basename "$0") -{ h | x | a | o }"
	echo "    -h: Install headless configuration files"
	echo "    -x: Install graphical configuration files"
	echo "    -a: Install headless + graphical configuration files"
	echo "    -o: Install Openbox configuration files"
}

_checkconfig(){
	if [ -e "$HOME/.config" ]; then
		echo "==> $HOME/.config exists"
	else
		echo "==> $HOME/.config does not exist, creating"
		mkdir -p "$HOME/.config"
	fi
}

_linkfiles(){

_checkconfig

case "$1" in
	"headless") QUEUE=${TERMDOTS[@]};;
	"graphical") QUEUE=${XDOTS[@]};;
	"openbox") QUEUE=${OBDOTS[@]};;
esac

echo "==> Installing $1 configuration files"
for dot in $QUEUE; do
	echo -e "==> Processing $dot"
	echo -e "\e[1;31m ==> \e[0m removing existing on $HOME"
	rm -r "$HOME/.$dot"
	echo -e "\e[1;32m ==> \e[0m linking new file into $HOME"
	ln -sf "$DOTLOC/$dot" "$HOME/.$dot"
done
}

case "$1" in
	"-h") _linkfiles headless ;;
	"-x") _linkfiles graphical ;;
	"-a") _linkfiles headless
	      _linkfiles graphical ;;
	"-o") _linkfiles openbox ;;
	   *) _usage ;;
esac

