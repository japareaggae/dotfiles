#!/bin/sh
# link-files: links dotfiles from a repo into a folder
# Originally written by Michael Smalley, kanged by Renan Guilherme

# --- Location
DOTLOC="$HOME/.dotfiles"

# --- Defitions
HEADLESS_DOTS="zshenv zshrc.local vimrc tmux.conf
	bin vim ncmpcpp
	config/git config/cower config/ranger config/htop"

GRAPHICAL_DOTS="conkyrc fehbg Xresources xprofile xinitrc
	config/compton.conf config/weston.ini
	config/i3 config/xcolors config/dunst config/feh config/sxiv"

_usage(){
	echo "Usage: $(basename "$0") [-h | -x]"
	echo "    -h: Install headless configuration files"
	echo "    -x: Install headless + graphical configuration files"
}

_checkconfig(){
	if [ -e "$HOME/.config" ]; then
		echo "$HOME/.config exists"
	else
		echo "$HOME/.config does not exist, creating"
		mkdir -p "$HOME/.config"
	fi
}

_linkheadless(){
echo "==> Installing headless configuration files"
for dot in $HEADLESS_DOTS; do
	echo -e "==> Processing $dot"
	echo -e "\e[1;31m ==> \e[0m removing existing on $HOME"
	rm -r "$HOME/.$dot"
	echo -e "\e[1;32m ==> \e[0m linking new file into $HOME"
	ln -sf "$DOTLOC/$dot" "$HOME/.$dot"
done
}

_linkgraphical(){
echo "==> Installing headless configuration files"
for dot in $GRAPHICAL_DOTS; do
	echo -e "==> Processing $dot"
	echo -e "\e[1;31m ==> \e[0m removing existing on $HOME"
	rm -r "$HOME/.$dot"
	echo -e "\e[1;32m ==> \e[0m linking new file into $HOME"
	ln -sf "$DOTLOC/$dot" "$HOME/.$dot"
done
}

case "$1" in
	"-h") _checkconfig ; _linkheadless ;;
	"-x") _checkconfig ; _linkheadless ; _linkgraphical ;;
	   *) _usage ;;
esac

