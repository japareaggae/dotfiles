# sway config file
# Please read sway(5) for a complete reference!

# ----- AUTOSTARTS
exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec swayidle -w \
	timeout 300 'brightnessctl -s set 9%' resume 'brightnessctl -q -r' \
	timeout 600 'swaylock -f && swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
	before-sleep 'swaylock -f' \
	lock 'swaylock -f'

# <https://github.com/swaywm/sway/issues/3799>
#exec udiskie -t --appindicator
#exec nm-applet --indicator

# ----- APPEARANCE
# -- Font
font pango:DejaVu Sans 8

# -- Borders
default_border pixel 2

# ----- KEYBINDINGS
# -- Modkey
# Mod1 = Alt; Mod4 = Super
set $mod Mod4

# -- Floating
floating_modifier $mod
bindsym $mod+Shift+n floating toggle
bindsym $mod+n focus mode_toggle

# -- Focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# -- Moving
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# -- Splitting
bindsym $mod+c split h
bindsym $mod+v split v

# -- Changing container layout
bindsym $mod+q layout tabbed
bindsym $mod+w layout stacking
bindsym $mod+e layout toggle split
bindsym $mod+F11 fullscreen

# -- Parent/child container
bindsym $mod+a focus parent
bindsym $mod+z focus child

# -- Switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

bindsym $mod+bracketleft workspace prev
bindsym $mod+bracketright workspace next

# -- Move container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

bindsym $mod+Shift+bracketleft move container to workspace prev_on_output
bindsym $mod+Shift+bracketright move container to workspace next_on_output

# -- Move containers or workspaces between outputs
bindsym $mod+period move container to output right
bindsym $mod+comma move container to output left

bindsym $mod+Shift+period move workspace to output right
bindsym $mod+Shift+comma move workspace to output left

# -- Kill focused window
bindsym $mod+Shift+q kill

# -- Reload and restart
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart

# -- Resize mode
mode "resize" {
	# These bindings trigger as soon as you enter the resize mode
	# Left/Right: Shrink/Grow Width
	# Up/Down: Shrink/Grow Height
	bindsym Shift+h resize shrink width 10 px or 10 ppt
	bindsym Shift+j resize grow height 10 px or 10 ppt
	bindsym Shift+k resize shrink height 10 px or 10 ppt
	bindsym Shift+l resize grow width 10 px or 10 ppt

	bindsym Shift+Left resize shrink width 10 px or 10 ppt
	bindsym Shift+Down resize grow height 10 px or 10 ppt
	bindsym Shift+Up resize shrink height 10 px or 10 ppt
	bindsym Shift+Right resize grow width 10 px or 10 ppt

	bindsym h resize shrink width 2 px or 2 ppt
	bindsym j resize grow height 2 px or 2 ppt
	bindsym k resize shrink height 2 px or 2 ppt
	bindsym l resize grow width 2 px or 2 ppt

	bindsym Left resize shrink width 2 px or 2 ppt
	bindsym Down resize grow height 2 px or 2 ppt
	bindsym Up resize shrink height 2 px or 2 ppt
	bindsym Right resize grow width 2 px or 2 ppt

	# back to normal: Enter or Escape
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# -- Scratchpad
bindsym $mod+Shift+m move scratchpad
bindsym $mod+m scratchpad show

# ----- APPLICATION KEYBINDS -----
set $terminal alacritty

# -- Application launchers
bindsym $mod+Shift+space exec wofi --show run
bindsym $mod+space       exec wofi --show drun

# -- Terminal and file manager
bindsym $mod+Return       exec $terminal
bindsym $mod+Shift+Return exec $terminal -e ranger

# -- Session menu
bindsym $mod+Shift+Delete exec ~/.bin/dmenu-session
bindsym XF86ScreenSaver   exec ~/.bin/dmenu-session lock

# -- NetworkManager
bindsym $mod+F12 exec $terminal -e nmtui

# -- Screenshotting
bindsym Print exec $HOME/.bin/wscreenshot region

# -- MPD
bindsym XF86AudioPlay exec mpc toggle
bindsym XF86AudioPrev exec mpc prev
bindsym XF86AudioNext exec mpc next
bindsym XF86AudioStop exec mpc stop

# -- Brightness
bindsym XF86MonBrightnessDown exec brightnessctl -e -q -n set 5%-
bindsym XF86MonBrightnessUp   exec brightnessctl -e -q set +5%

# -- PulseAudio volume control
bindsym XF86AudioMute        exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioMicMute     exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym $mod+XF86AudioMute   exec $terminal pulsemixer

# -- ThinkVantage button
bindsym XF86Launch1 exec xdg-open "https://wiki.archlinux.org"

# ----- WINDOW RULES
for_window [instance="screenshot preview"] floating enable

# ----- WINDOW ASSIGNMENTS
assign [class="^TeamSpeak 3$"] 10
assign [app_id="telegramdesktop"] 7

# ----- WORKSPACE RULES
# are set by hostname instead of globally

# ----- INFORMATION BAR
bar {
	status_command i3status
	position top
	font pango:DejaVu Sans 8
	colors {
		background #000000
		separator #202020
		statusline #ffffff
		# Class            Border  Backgr. Text
		focused_workspace  #444444 #444444 #ffffff
		active_workspace   #444444 #444444 #888888
		inactive_workspace #000000 #000000 #888888
		urgent_workspace   #880000 #880000 #ffffff
	}
}

# ----- INPUT
input * xkb_layout br

# ----- INCLUDES
include "$(uname -n).conf"
